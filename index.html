<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>90æ–¤å°‘å¥³Â·æ¶…æ§ƒå®éªŒå®¤ | ç»ˆæç‰ˆ</title>
    <style>
        :root {
            --mint: #e0f2f1;
            --lavender: #f3e5f5;
            --deep-mint: #80cbc4;
            --danger-red: #ff5252;
            --text-main: #455a64;
            --glass: rgba(255, 255, 255, 0.7);
        }

        body {
            margin: 0;
            background: linear-gradient(135deg, var(--mint), var(--lavender));
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
            color: var(--text-main);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden;
        }

        #app-container {
            width: 95%;
            max-width: 500px;
            background: var(--glass);
            backdrop-filter: blur(15px);
            border-radius: 30px;
            padding: 25px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.08);
            border: 1px solid rgba(255,255,255,0.4);
            text-align: center;
        }

        .step { display: none; }
        .active { display: block; animation: slideIn 0.5s ease-out; }

        @keyframes slideIn { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }

        h1 { font-weight: 300; letter-spacing: 2px; color: #37474f; margin-bottom: 10px; }
        .sub-title { font-size: 0.9rem; color: #78909c; margin-bottom: 25px; }

        /* æƒ©ç½šæ ·å¼ */
        .cost-box { background: #fff; padding: 15px; border-radius: 15px; margin: 15px 0; border-left: 5px solid var(--danger-red); text-align: left; }
        .red-bold { color: var(--danger-red); font-weight: bold; font-size: 1.2rem; }

        /* æŒ‰é’®æ ·å¼ */
        button {
            background: var(--deep-mint);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            transition: 0.3s;
            font-size: 1rem;
            margin: 10px 5px;
        }
        button:hover { opacity: 0.8; transform: scale(1.02); }
        button:disabled { background: #cfd8dc; cursor: not-allowed; }
        .btn-outline { background: none; border: 1px solid var(--deep-mint); color: var(--deep-mint); }

        /* è¾“å…¥æ¡†æ ·å¼ */
        .quote-input {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 10px;
            box-sizing: border-box;
            background: rgba(255,255,255,0.5);
        }

        /* å›¾ç‰‡ä¸Šä¼ é¢„è§ˆåŒº */
        #upload-box {
            width: 100%;
            height: 150px;
            border: 2px dashed var(--deep-mint);
            border-radius: 15px;
            margin: 15px 0;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            overflow: hidden;
            background: rgba(255,255,255,0.3);
        }
        #upload-box img { width: 100%; height: 100%; object-fit: cover; }
        #file-input { display: none; }

        /* æ¸¸æˆ/ä»»åŠ¡åŒº */
        .task-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .task-card { background: white; padding: 15px; border-radius: 15px; cursor: pointer; font-size: 0.9rem; transition: 0.3s; }
        .task-card:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        
        #game-box { height: 220px; background: white; border-radius: 15px; position: relative; overflow: hidden; margin: 10px 0; border: 1px solid #eee; }
        
        /* æ°”æ³¡æ ·å¼ä¼˜åŒ– */
        .bubble { 
            position: absolute; 
            width: 90px; 
            height: 90px; 
            background: var(--danger-red); 
            border-radius: 50%; 
            cursor: pointer; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            color: white; 
            font-size: 0.8rem; 
            font-weight: bold;
            padding: 10px;
            text-align: center;
            line-height: 1.2;
            box-shadow: 0 4px 10px rgba(255, 82, 82, 0.3);
            animation: pulse 1s infinite alternate;
        }

        @keyframes pulse { from { transform: scale(1); } to { transform: scale(1.05); } }

        /* æŠ„å†™åŒº */
        #typing-area { width: 100%; height: 100px; border-radius: 10px; border: 1px solid #ccc; padding: 10px; margin-top: 10px; box-sizing: border-box; }
        
        /* æ„¿æ™¯å¢™æµ®çª— */
        #vision-reminder { margin-top: 15px; display: none; padding: 10px; background: #fff; border-radius: 15px; font-size: 0.8rem; border: 1px solid var(--mint); text-align: left; }
    </style>
</head>
<body>

<div id="app-container">
    
    <!-- STEP 1: ä»£ä»·è®¡ç®— -->
    <div id="step1" class="step active">
        <h1>æ¬²æœ›çš„è´¦å•</h1>
        <p class="sub-title">120æ–¤åˆ°90æ–¤ï¼Œè¿™é¡¿é¥­ä¼šè®©ä½ ç™½è´¹åŠä¸ªæœˆã€‚</p>
        <div style="text-align: left; font-size: 0.9rem;">é€‰æ‹©ä½ æƒ³åƒçš„ä¸œè¥¿ï¼š</div>
        <div class="task-grid" style="margin-top:10px;">
            <button class="btn-outline" onclick="addCost(550, 8)">ğŸ§‹ èŠå£«å¥¶èŒ¶</button>
            <button class="btn-outline" onclick="addCost(600, 9)">ğŸŸ ç‚¸é¸¡è–¯æ¡</button>
            <button class="btn-outline" onclick="addCost(400, 6)">ğŸ° å¥¶æ²¹è›‹ç³•</button>
            <button class="btn-outline" onclick="addCost(800, 12)">ğŸ² éº»è¾£ç«é”…</button>
        </div>
        <div class="cost-box">
            é¢„è®¡æ‘„å…¥ï¼š<span class="red-bold" id="cal-display">0</span> å¤§å¡<br>
            ä½ éœ€è¦æ…¢è·‘ï¼š<span class="red-bold" id="run-display">0</span> å…¬é‡Œæ‰èƒ½æŠµæ¶ˆ
        </div>
        <button onclick="goStep(2)" style="width:100%">æˆ‘æ¥å—ä»£ä»·ï¼Œç»§ç»­</button>
    </div>

    <!-- STEP 2: èº«ä»½ç¾è¾± (æ¯’èˆŒè¡¥å……ç‰ˆ) -->
    <div id="step2" class="step">
        <h1>ç›´è§†é‚£ä¸ªè½¯å¼±çš„è‡ªå·±</h1>
        <div style="text-align: left; background: white; padding: 20px; border-radius: 15px; line-height: 1.6; font-size: 0.95rem;">
            <p>ğŸ”´ <b>å¯¹æ¯”ä¼¤å®³ï¼š</b> ä½ ç¾¡æ…•çš„é‚£äº›TAä»¬éƒ½é‚£ä¹ˆç˜¦ï¼äººå®¶éƒ½èƒ½æ§åˆ¶ä½è‡ªå·±çš„é£Ÿæ¬²ï¼Œå‡­ä»€ä¹ˆä½ ä¸è¡Œï¼Ÿ</p>
            <p>ğŸ”´ <b>çµé­‚æ‹·é—®ï¼š</b> éš¾é“ä½ è¿™è¾ˆå­éƒ½ä¸æƒ³æ‹å¥½çœ‹çš„ç…§ç‰‡äº†å—ï¼Ÿæƒ³ä¸€è¾ˆå­æ´»åœ¨ä¿®å›¾è½¯ä»¶é‡Œå—ï¼Ÿ</p>
            <p>ğŸ”´ <b>èº«ä»½çœŸç›¸ï¼š</b> 120æ–¤çš„ä½ è¿˜è¦ç»§ç»­åœ¨è¿™ä¹æ±‚é£Ÿç‰©å—ï¼Ÿ90æ–¤çš„ä»™å¥³æ­£åœ¨æœªæ¥å˜²ç¬‘ä½ çš„è´ªå©ªã€‚</p>
            <p class="red-bold" style="text-align: center;">â€œé™¤äº†åƒï¼Œä½ çš„äººç”Ÿå°±æ²¡åˆ«çš„è¿½æ±‚äº†å—ï¼Ÿâ€</p>
        </div>
        <button onclick="goStep(3)" style="width:100%; background:var(--danger-red)">æˆ‘ä¸é…å˜ç˜¦ï¼Œæˆ‘è¦ç»§ç»­å •è½</button>
        <button class="btn-outline" onclick="goStep(3)" style="width:100%">æˆ‘æƒ³å˜å¥½ï¼Œå»æ­¦è£…è‡ªå·±</button>
    </div>

    <!-- STEP 3: è‡ªå®šä¹‰è¯­å½•å’Œå›¾ç‰‡ -->
    <div id="step3" class="step">
        <h1>åŠ¨åŠ›æ­¦è£…</h1>
        <p class="sub-title">è¯·å¡«å†™5å¥åˆºç—›æˆ–æ¿€åŠ±ä½ çš„è¯­å½•ï¼Œå¹¶ä¸Šä¼ å˜ç¾ç›®æ ‡å›¾</p>
        
        <div id="quote-inputs">
            <input type="text" class="quote-input" placeholder="è¯­å½• 1ï¼šä¾‹å¦‚ï¼šç¾¡æ…•çš„TAä»¬éƒ½é‚£ä¹ˆç˜¦ï¼Œä½ å‘¢ï¼Ÿ">
            <input type="text" class="quote-input" placeholder="è¯­å½• 2ï¼šä¾‹å¦‚ï¼šäººå®¶èƒ½æ§åˆ¶é£Ÿæ¬²ï¼Œæˆ‘ä¹Ÿå¯ä»¥ï¼">
            <input type="text" class="quote-input" placeholder="è¯­å½• 3ï¼šä¾‹å¦‚ï¼šä¸ºäº†æ‹å¥½çœ‹ç…§ç‰‡ï¼Œè¿™é¡¿ä¸åƒï¼">
            <input type="text" class="quote-input" placeholder="è¯­å½• 4ï¼šä¾‹å¦‚ï¼š90æ–¤çš„ç©ºæ°”éƒ½æ˜¯ç”œçš„">
            <input type="text" class="quote-input" placeholder="è¯­å½• 5ï¼šä¾‹å¦‚ï¼šä½ å¯ä»¥å¿å—é¥¥é¥¿ï¼Œä½†ä¸èƒ½å¿å—ä¸‘">
        </div>

        <div id="upload-box" onclick="document.getElementById('file-input').click()">
            <span id="upload-hint">ç‚¹å‡»ä¸Šä¼ ä½ çš„ç›®æ ‡èº«æ/è£™å­ç…§ç‰‡</span>
            <img id="preview-img" src="" style="display:none">
        </div>
        <input type="file" id="file-input" accept="image/*" onchange="previewImage(this)">

        <button onclick="validateMotivation()" style="width:100%">è£…å¡«å®Œæ¯•ï¼Œè¿›å…¥æ´—ç¤¼</button>
    </div>

    <!-- STEP 4: å¼ºåˆ¶æŠ„å†™ -->
    <div id="step4" class="step">
        <h1>ç†æ™ºç”Ÿæ­»é”</h1>
        <p class="sub-title">å¿…é¡»å‡†ç¡®æ— è¯¯æŠ„å†™ä»¥ä¸‹æ–‡å­—ï¼Œå¦åˆ™ä¸å‡†è¿›é£Ÿã€‚</p>
        <div id="target-text" style="background:#fff; padding:15px; border-radius:10px; font-size:0.9rem; text-align:left; border:1px solid var(--danger-red);">
            æˆ‘ç°åœ¨çš„é¥¥é¥¿æ˜¯å»‰ä»·çš„é”™è§‰ã€‚120æ–¤çš„æˆ‘æ²¡æœ‰èµ„æ ¼è°ˆè®ºäº«å—ï¼Œåªæœ‰90æ–¤çš„æˆ‘æ‰æœ‰èµ„æ ¼æ‹¥æœ‰è‡ªç”±ã€‚æˆ‘è¦æ‰“ç¢å¤šå·´èƒºçš„å¥´å½¹ï¼ŒæŠŠè¿™ä¸€åˆ»çš„ç—›è‹¦å˜æˆå˜ç¾çš„ç‡ƒæ–™ã€‚æˆ‘ç»ä¸å‘è¿™ä¸€ç›˜æ²¹è„‚ä½å¤´ã€‚
        </div>
        <textarea id="typing-area" oninput="checkTyping()" placeholder="è¯·åœ¨æ­¤ç²¾å‡†è¾“å…¥ä¸Šæ–¹æ–‡å­—..."></textarea>
        <p id="type-hint" style="font-size:0.8rem; color:var(--danger-red)"></p>
        <button id="type-btn" disabled onclick="goStep(5)" style="width:100%">è¾“å…¥å®Œæˆï¼Œçµé­‚å·²æ¸…é†’</button>
    </div>

    <!-- STEP 5: é¿é£æ¸¯ä»»åŠ¡ -->
    <div id="step5" class="step">
        <h1>15åˆ†é’Ÿé¿é£æ¸¯</h1>
        <div id="vision-reminder">
            <img id="final-preview" src="" style="width:60px; height:60px; float:left; margin-right:10px; border-radius:5px; object-fit:cover;">
            <p id="random-quote-display" style="font-weight:bold; color:var(--danger-red)"></p>
            <div style="clear:both"></div>
        </div>

        <p class="sub-title">é€‰ä¸€ä¸ªä»»åŠ¡ï¼Œå½»åº•æ€æ‰é£Ÿæ¬²ï¼š</p>
        <div class="task-grid">
            <div class="task-card" onclick="startMiniGame()">ğŸ® <span>æ¶ˆç­æ¬²æœ›</span></div>
            <div class="task-card" onclick="alert('å¥–åŠ±åŠªåŠ›å…‹åˆ¶æ¬²æœ›çš„è‡ªå·±ï¼Œå»æŒ‘ä¸€ä»¶æƒ³ä¹°å¾ˆä¹…çš„å•å“å§ï¼')">ğŸ›ï¸ <span>å¥–åŠ±è‡ªå·±</span></div>
            <div class="task-card" onclick="alert('å»é•œå­å‰ï¼Œç»ƒä¹ ç”»å‡º90æ–¤çš„ä¸‹é¢Œçº¿ï¼')">ğŸ’„ <span>ç»ƒä¹ ç¾å¦†</span></div>
            <div class="task-card" onclick="alert('è°ƒå¤§éŸ³ä¹ï¼æŠŠå±‹å­æ”¶æ‹¾åˆ°ä¸€å°˜ä¸æŸ“ï¼')">ğŸ§¹ <span>æ•´ç†æˆ¿é—´</span></div>
            <div class="task-card" style="grid-column: span 2;" onclick="alert('å¤§å£°å”±å®Œä¸‰é¦–ä½ æœ€å–œæ¬¢çš„æ­Œï¼')">ğŸ¤ <span>ç»ƒä¹ å”±æ­Œ</span></div>
        </div>
        
        <div id="game-container" style="display:none; margin-top:20px;">
            <h3 style="font-size:0.9rem;">ç¬¬ <span id="round-num">1</span>/5 å±€</h3>
            <div id="game-box"></div>
        </div>

        <button class="btn-outline" onclick="location.reload()" style="margin-top:20px;">æˆ‘å·²ç»å½»åº•å†·é™äº†</button>
    </div>

</div>

<script>
    let totalCal = 0;
    let totalRun = 0;
    let userQuotes = [];
    let userImgSrc = "";

    function addCost(cal, run) {
        totalCal += cal;
        totalRun += run;
        document.getElementById('cal-display').innerText = totalCal;
        document.getElementById('run-display').innerText = totalRun;
    }

    function goStep(n) {
        document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
        document.getElementById('step' + n).classList.add('active');
        if(n === 5) showVision();
    }

    function previewImage(input) {
        if (input.files && input.files[0]) {
            let reader = new FileReader();
            reader.onload = function(e) {
                userImgSrc = e.target.result;
                document.getElementById('preview-img').src = e.target.result;
                document.getElementById('preview-img').style.display = 'block';
                document.getElementById('upload-hint').style.display = 'none';
            };
            reader.readAsDataURL(input.files[0]);
        }
    }

    function validateMotivation() {
        const inputs = document.querySelectorAll('.quote-input');
        userQuotes = Array.from(inputs).map(i => i.value.trim()).filter(v => v !== "");
        if (userQuotes.length < 5) { alert("è¯·å†™æ»¡5å¥æ¿€åŠ±è¯­å½•ï¼"); return; }
        if (!userImgSrc) { alert("è¯·ä¸Šä¼ ä¸€å¼ ç›®æ ‡ç…§ç‰‡ï¼"); return; }
        goStep(4);
    }

    function showVision() {
        const container = document.getElementById('vision-reminder');
        container.style.display = 'block';
        document.getElementById('final-preview').src = userImgSrc;
        const randomQ = userQuotes[Math.floor(Math.random() * userQuotes.length)];
        document.getElementById('random-quote-display').innerText = "â€œ" + randomQ + "â€";
    }

    function checkTyping() {
        const target = document.getElementById('target-text').innerText.trim();
        const input = document.getElementById('typing-area').value.trim();
        const btn = document.getElementById('type-btn');
        const hint = document.getElementById('type-hint');
        if (input === target) {
            btn.disabled = false;
            hint.innerText = "æ ¡éªŒé€šè¿‡ã€‚";
        } else {
            btn.disabled = true;
            hint.innerText = input.length > 0 && !target.startsWith(input) ? "âŒ è¾“å…¥æœ‰è¯¯" : "";
        }
    }

    let round = 1;
    function startMiniGame() {
        document.getElementById('game-container').style.display = 'block';
        initRound();
    }

    function initRound() {
        const box = document.getElementById('game-box');
        box.innerHTML = '';
        let count = 0;
        let goal = 5 + round;

        function createBubble() {
            if (count >= goal) {
                if (round < 5) {
                    round++;
                    document.getElementById('round-num').innerText = round;
                    initRound();
                } else {
                    alert("âœ… 5å±€æŒ‘æˆ˜å®Œæˆï¼ç†æ™ºå·²æˆ˜èƒœæ¬²æœ›ï¼");
                    location.reload();
                }
                return;
            }
            const b = document.createElement('div');
            b.className = 'bubble';
            b.innerText = "å¤§é¦‹çŒªç»™æˆ‘æ»šï¼";
            b.style.left = Math.random() * 70 + 5 + '%';
            b.style.top = Math.random() * 70 + 5 + '%';
            b.onclick = () => {
                box.removeChild(b);
                count++;
                createBubble();
            };
            box.appendChild(b);
        }
        createBubble();
    }
</script>

</body>
</html>
